<%= form_for @school do |f| %>
  <%= f.rg2a_explain_required_asterisk %>
  <%= render "layouts/form_errors", object: @school %>
  <% unless current_user.is_a?(Users::God) %>
    <fieldset>
      <div class="form-group">
        <%= f.label :week_ids do %>
          Semaines de stage du collège
          <small class="form-text text-muted">Utilisez la touche <kbd>contrôle</kbd> pour sélectionner plusieurs semaines en même temps.</small>
          <%= f.rg2a_required_content_tag %>
        <% end %>
        <%= f.select :week_ids, options_from_collection_for_select(@current_weeks, :id, :select_text_method, @school.week_ids), {}, multiple: true, class: "form-control col-lg-6", required: true %>
      </div>
    </fieldset>
  <% end %>

  <fieldset>
    <div class="form-group">
      <%= f.label :name do %>
        Nom du collège
        <%= f.rg2a_required_content_tag %>
      <% end %>
      <%= f.text_field :name, class: 'form-control col-lg-6', required: true %>
    </div>
  </fieldset>

  <fieldset data-controller="algolia-place">
    <div class="form-group d-none" data-target="algolia-place.autocompleteFormGroup" >
      <%= f.label :autocomplete do %>
        Adresse du collège
        <%= f.rg2a_required_content_tag %>
      <% end %>
      <%= f.text_field :autocomplete, placeholder: "Saisir l'adresse et confirmer avec l'aide à la saisie",
                                         value: @school.formatted_autocomplete_address,
                                         required: true,
                                         data: { target: 'algolia-place.autocompleteInput' } %>
      <input type="hidden"
             name="school[coordinates][latitude]"
             value="<%= @school.coordinates&.lat %>"
             data-target="algolia-place.latitudeInput" />
      <input type="hidden"
             name="school[coordinates][longitude]"
             value="<%= @school.coordinates&.lon %>"
             data-target="algolia-place.longitudeInput" />
    </div>
    <div class="form-group d-none">
      <div class="form-row">
        <div class="col-sm-6">
          <div class="form-group">
            <%= f.label :street do %>
              Rue
              <%= f.rg2a_required_content_tag %>
            <% end %>
            <%= f.text_field :street, class: "form-control", required: true, data: {target: 'algolia-place.streetInput'} %>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <%= f.label :city do %>
              Ville
              <%= f.rg2a_required_content_tag %>
            <% end %>
            <%= f.text_field :city, class: "form-control", required: true, data: {target: 'algolia-place.cityInput'} %>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <%= f.label :zipcode do %>
              Code postal
              <%= f.rg2a_required_content_tag %>
            <% end %>
            <%= f.text_field :zipcode, class: "form-control", required: true, data: {target: 'algolia-place.zipcodeInput'} %>
          </div>
        </div>
      </div>
    </div>
  </fieldset>

  <%= f.submit 'Enregistrer', class: 'btn btn-primary' %>
<% end %>
