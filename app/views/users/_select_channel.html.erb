<div class="form-group select-channel">
  <div class="label">
    <%= label %>
    <div>
      <%= yield %>
    </div>
  </div>

  <div class='row my-2' data-controller="select_channel">
    <div class='col-6'>
      <%= form.radio_button :channel,
                          "email",
                          id: 'channel-email',
                          'data-action' => "change->select_channel#checkEmail" %>
      <%= form.label :channel, "Email",
                            class: 'channel-radio-label',
                            for: "select-channel-email",
                            "data-action" => "click->select_channel#chooseEmail" do %>
        <div class="image-channel image-email"></div>
        <span>Email</span>
      <% end %>
    </div>
    <div class='col-6'>
      <%= form.radio_button :channel,
                          "phone",
                          class: 'channel-radio-button',
                          id: 'channel-phone',
                          'data-action' => "change->select_channel#checkPhone" %>
      <%= form.label :channel,
                    "SMS",
                    class: 'channel-radio-label',
                    for: "select-channel-phone",
                    'data-action' => "click->select_channel#choosePhone" do %>
        <div class="image-channel image-sms"></div>
        <span>SMS</span>
      <% end %>
    </div>
  </div>
</div>

<div data-target="select_channel.emailBloc" class="form-group email d-none">
  <%= form.label :email do %>
    <span data-target="signup.label"><%= resource.school_manager? ? 'Adresse électronique académique' : 'Adresse électronique (e-mail)'%></span>
    <small class="form-text text-muted">Cette adresse sera utilisée pour communiquer avec vous</small>
  <% end %>
  <%= form.email_field :email, class: 'form-control', value: resource.email.blank? ? params[:email] : resource.email, placeholder: "ex: nom@exemple.fr", autofocus: params[:email].blank? ? true : false, data: {action: 'change->signup#onBlurEmailInput', target: 'signup.emailInput'} %>
  <small class="d-none" data-target="signup.emailHint"></small>
</div>
<div data-target="select_channel.phoneBloc" class="form-group phone">
  <%= form.label :phone, 'data-action' => "click->select_channel#focusPhone" do %>
    <span>Numéro de mobile</span>
    <small class="form-text text-muted">Ce numéro sera utilisé pour communiquer avec vous</small>
  <% end %>
  <%= react_component("CountryPhoneSelect",
    {
      name: 'user[phone]',
      value: resource.phone
    })
  %>
</div>

